{"ast":null,"code":"// pages/CreateTicket.tsx → components/CreateTicketModal.tsx\nimport React from'react';import{useFormik}from'formik';import Button from'../components/Button';import Input from'../components/Input';import{useNavigate}from'react-router-dom';import{ticketSchema}from'../utils/validation';import{ticketsAPI}from'../api';import{PRIORITIES,CATEGORIES}from'../types';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateTicketModal=_ref=>{let{isOpen,onClose,onSuccess}=_ref;const navigate=useNavigate();const formik=useFormik({initialValues:{title:'',description:'',category:'',priority:'medium',status:'open'// ← ADD THIS LINE ONLY\n},validationSchema:ticketSchema,onSubmit:async values=>{try{await ticketsAPI.createTicket(values);onSuccess===null||onSuccess===void 0?void 0:onSuccess();onClose();}catch(error){console.error('Failed to create ticket');}}});const getFieldError=field=>{return formik.touched[field]&&formik.errors[field]?String(formik.errors[field]):undefined;};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/50 max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent\",children:\"Create New Ticket\"}),/*#__PURE__*/_jsx(Button,{variant:\"ghost\",className:\"text-gray-500 hover:text-gray-900 p-2 -m-2\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsx(Input,{label:\"Title\",name:\"title\",value:formik.values.title,onChange:formik.handleChange,error:getFieldError('title'),required:true}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",rows:6,value:formik.values.description,onChange:formik.handleChange,className:\"w-full px-4 py-3 rounded-xl border-2 focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-400 border-gray-200 hover:border-gray-300 bg-white resize-vertical\",placeholder:\"Describe your issue in detail...\"}),getFieldError('description')&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:getFieldError('description')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(Input,{label:\"Category\",name:\"category\",as:\"select\",value:formik.values.category,onChange:formik.handleChange,options:CATEGORIES.map(cat=>({value:cat.value,label:cat.label})),error:getFieldError('category'),required:true}),/*#__PURE__*/_jsx(Input,{label:\"Priority\",name:\"priority\",as:\"select\",value:formik.values.priority,onChange:formik.handleChange,options:PRIORITIES.map(prio=>({value:prio.value,label:prio.value})),error:getFieldError('priority'),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 pt-6\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",className:\"flex-1 text-lg py-4\",children:formik.isSubmitting?'Creating...':'Create Ticket'}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"secondary\",className:\"flex-1 text-lg py-4\",onClick:onClose,disabled:formik.isSubmitting,children:\"Cancel\"})]})]})]})});};export default CreateTicketModal;","map":{"version":3,"names":["React","useFormik","Button","Input","useNavigate","ticketSchema","ticketsAPI","PRIORITIES","CATEGORIES","jsx","_jsx","jsxs","_jsxs","CreateTicketModal","_ref","isOpen","onClose","onSuccess","navigate","formik","initialValues","title","description","category","priority","status","validationSchema","onSubmit","values","createTicket","error","console","getFieldError","field","touched","errors","String","undefined","className","children","variant","onClick","handleSubmit","label","name","value","onChange","handleChange","required","rows","placeholder","as","options","map","cat","prio","type","isSubmitting","disabled"],"sources":["D:/BROTOTYPE/DASHBOARD/frontend/src/components/CreateTicketModal.tsx"],"sourcesContent":["// pages/CreateTicket.tsx → components/CreateTicketModal.tsx\r\nimport React from 'react';\r\nimport { useFormik } from 'formik';\r\nimport Button from '../components/Button';\r\nimport Input from '../components/Input';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ticketSchema } from '../utils/validation';\r\nimport { CreateTicketData, ticketsAPI } from '../api';\r\nimport { PRIORITIES, CATEGORIES } from '../types';\r\n\r\ninterface CreateTicketModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void; // Refresh tickets list\r\n}\r\n\r\nconst CreateTicketModal: React.FC<CreateTicketModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onSuccess,\r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  const formik = useFormik<CreateTicketData>({\r\n    initialValues: {\r\n      title: '',\r\n      description: '',\r\n      category: '',\r\n      priority: 'medium',\r\n      status: 'open',  // ← ADD THIS LINE ONLY\r\n\r\n    },\r\n    validationSchema: ticketSchema,\r\n    onSubmit: async (values) => {\r\n      try {\r\n        await ticketsAPI.createTicket(values);\r\n        onSuccess?.(); \r\n        onClose();\r\n      } catch (error) {\r\n        console.error('Failed to create ticket');\r\n      }\r\n    },\r\n  });\r\n\r\n  const getFieldError = (field: string) => {\r\n    return formik.touched[field as keyof typeof formik.errors] \r\n      && formik.errors[field as keyof typeof formik.errors] \r\n      ? String(formik.errors[field as keyof typeof formik.errors]) \r\n      : undefined;\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/50 max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <h2 className=\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent\">\r\n            Create New Ticket\r\n          </h2>\r\n          <Button \r\n            variant=\"ghost\" \r\n            className=\"text-gray-500 hover:text-gray-900 p-2 -m-2\"\r\n            onClick={onClose}\r\n          >\r\n            ✕\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={formik.handleSubmit} className=\"space-y-6\">\r\n          <Input\r\n            label=\"Title\"\r\n            name=\"title\"\r\n            value={formik.values.title}\r\n            onChange={formik.handleChange}\r\n            error={getFieldError('title')}\r\n            required\r\n          />\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Description\r\n            </label>\r\n            <textarea\r\n              name=\"description\"\r\n              rows={6}\r\n              value={formik.values.description}\r\n              onChange={formik.handleChange}\r\n              className=\"w-full px-4 py-3 rounded-xl border-2 focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-400 border-gray-200 hover:border-gray-300 bg-white resize-vertical\"\r\n              placeholder=\"Describe your issue in detail...\"\r\n            />\r\n            {getFieldError('description') && (\r\n              <p className=\"text-red-500 text-sm mt-1\">{getFieldError('description')}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <Input\r\n              label=\"Category\"\r\n              name=\"category\"\r\n              as=\"select\"\r\n              value={formik.values.category}\r\n              onChange={formik.handleChange}\r\n              options={CATEGORIES.map(cat => ({ value: cat.value, label: cat.label }))}\r\n              error={getFieldError('category')}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Priority\"\r\n              name=\"priority\"\r\n              as=\"select\"\r\n              value={formik.values.priority}\r\n              onChange={formik.handleChange}\r\n              options={PRIORITIES.map(prio => ({ value: prio.value, label: prio.value }))}\r\n              error={getFieldError('priority')}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex gap-4 pt-6\">\r\n            <Button type=\"submit\" variant=\"primary\" className=\"flex-1 text-lg py-4\">\r\n              {formik.isSubmitting ? 'Creating...' : 'Create Ticket'}\r\n            </Button>\r\n            <Button \r\n              type=\"button\" \r\n              variant=\"secondary\" \r\n              className=\"flex-1 text-lg py-4\"\r\n              onClick={onClose}\r\n              disabled={formik.isSubmitting}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateTicketModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}