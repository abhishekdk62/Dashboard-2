{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{meAPI}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(undefined);export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const login=userData=>{setUser(userData);};const logout=async()=>{try{await meAPI.logout();}catch(error){console.error('Logout error:',error);}setUser(null);};useEffect(()=>{const checkAuth=async()=>{try{const res=await meAPI.getMe();setUser(res.data);}catch(error){console.error('Auth check failed:',error);setUser(null);}finally{setLoading(false);}};checkAuth();},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout,loading},children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(!context)throw new Error('useAuth must be used within AuthProvider');return context;};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","meAPI","jsx","_jsx","AuthContext","undefined","AuthProvider","_ref","children","user","setUser","loading","setLoading","login","userData","logout","error","console","checkAuth","res","getMe","data","Provider","value","useAuth","context","Error"],"sources":["D:/BROTOTYPE/DASHBOARD/frontend/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { User } from '../types';\r\nimport { meAPI } from '../api';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  login: (userData: User) => void;\r\n  logout: () => void;\r\n  loading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const login = (userData: User) => {\r\n    setUser(userData);\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await meAPI.logout();\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n    setUser(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const res = await meAPI.getMe();\r\n        setUser(res.data);\r\n      } catch (error) {\r\n        console.error('Auth check failed:', error);\r\n        setUser(null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    checkAuth();\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) throw new Error('useAuth must be used within AuthProvider');\r\n  return context;\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAmB,OAAO,CAExF,OAASC,KAAK,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAS/B,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAA8BQ,SAAS,CAAC,CAEzE,MAAO,MAAM,CAAAC,YAA+C,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC1E,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAc,KAAK,CAAIC,QAAc,EAAK,CAChCJ,OAAO,CAACI,QAAQ,CAAC,CACnB,CAAC,CAED,KAAM,CAAAC,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,KAAM,CAAAd,KAAK,CAACc,MAAM,CAAC,CAAC,CACtB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACvC,CACAN,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAEDV,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAlB,KAAK,CAACmB,KAAK,CAAC,CAAC,CAC/BV,OAAO,CAACS,GAAG,CAACE,IAAI,CAAC,CACnB,CAAE,MAAOL,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1CN,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACDM,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEf,IAAA,CAACC,WAAW,CAACkB,QAAQ,EAACC,KAAK,CAAE,CAAEd,IAAI,CAAEI,KAAK,CAAEE,MAAM,CAAEJ,OAAQ,CAAE,CAAAH,QAAA,CAC3DA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAAgB,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAG3B,UAAU,CAACM,WAAW,CAAC,CACvC,GAAI,CAACqB,OAAO,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,0CAA0C,CAAC,CACzE,MAAO,CAAAD,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}